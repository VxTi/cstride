package stl::io;

module Files {
    extern fn fopen(filename: string, mode: string): ptr;

    extern fn fclose(file: ptr): int32;

    extern fn fread(ptr: ptr, size: usize, count: usize, stream: ptr): usize;

    extern fn fwrite(ptr: ptr, size: usize, count: usize, stream: ptr): usize;

    extern fn exit(status: int32): void;

    fn open_file(filename: string, mode: string): ptr {
        return fopen(filename, mode);
    }

    fn close_file(file: ptr): int32 {
        return fclose(file);
    }

    fn file_read(ptr: ptr, size: usize, count: usize, stream: ptr): usize {
        return fread(ptr, size, count, stream);
    }

    fn file_write(ptr: ptr, size: usize, count: usize, stream: ptr): usize {
        return fwrite(ptr, size, count, stream);
    }

    fn program_exit(status: int32): void {
        exit(status);
    }
}